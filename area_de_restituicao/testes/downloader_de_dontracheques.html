<!DOCTYPE html>
<html lang="pt-BR"> <!-- Define o idioma da página como Português do Brasil -->
<head>
    <meta charset="UTF-8"> <!-- Configura a codificação de caracteres para UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ajusta a exibição para dispositivos móveis -->
    <title>Exibição de Contracheques</title> <!-- Título da página -->

    <!-- Estilo da página -->
    <style>
        /* Define o estilo básico para o corpo da página */
        body {
            font-family: Arial, sans-serif; /* Fonte padrão */
            margin: 0; /* Remove margens padrão */
            padding: 0; /* Remove preenchimento padrão */
            display: flex; /* Ativa o layout flexível */
            flex-direction: column; /* Empilha os itens verticalmente */
            align-items: center; /* Centraliza itens horizontalmente */
            justify-content: flex-start; /* Alinha itens ao topo */
            min-height: 100vh; /* Garante que o corpo ocupe a altura total da tela */
            background-color: #f4f4f9; /* Define a cor de fundo */
        }

        /* Estiliza o cabeçalho */
        header {
            margin: 20px;
        }
        

        /* Muda a cor do botão quando o mouse passa sobre ele */
        button:hover {
            background-color: #0056b3;
        }

        /* Estiliza a área de exibição dos PDFs */
        .pdf-container {
            display: flex; /* Layout flexível */
            flex-direction: column; /* Empilha os itens verticalmente */
            width: 90%; /* Largura relativa */
            max-width: 2000px; /* Largura máxima */
            margin-top: 20px; /* Espaço acima do contêiner */
        }

        /* Estilo de cada item de PDF */
        .pdf-item {
            display: flex; /* Layout flexível */
            align-items: center; /* Centraliza itens verticalmente */
            margin-bottom: 20px; /* Espaço entre itens */
            border: 1px solid #ccc; /* Borda cinza */
            border-radius: 4px; /* Bordas arredondadas */
            overflow: hidden; /* Oculta conteúdo extra */
            position: relative; /* Define o posicionamento relativo */
        }

        /* Estilo dos iframes usados para exibir os PDFs */
        iframe {
            border: none; /* Remove borda padrão */
        }

        /* Contêiner para checkboxes */
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-left: 10px;
        }

        .checkbox-container label {
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <!-- Cabeçalho da página -->
    <header>
        <h1>Downloader de Contracheques</h1>
        <h2>Instruções:</h2>
        <!-- Lista com instruções para o usuário -->
        <ol>
            <li>Primeiramente, faça login no site do <a href="https://rhbahia.ba.gov.br/" target="_blank">RH Bahia</a>.</li>
            <li>Separe uma aba para esta ferramenta para evitar confusões.</li>
            <li>Permita a abertura de pop-ups ao clicar em "Abrir Links".</li>
        </ol>

        <!-- Campo para entrada da matrícula -->
        <div>
            <input type="text" id="matricula" placeholder="Matrícula">
        </div>

        <!-- Seção para abrir múltiplos PDFs -->
        <h3>Abertura avançada:</h3>
        <div>
            <input type="number" id="anoInicio" placeholder="Ano de início (ex: 2019)" min="2019" max="2024">
            <input type="number" id="mesInicio" placeholder="Mês de início (ex: 1)" min="1" max="12">
            <input type="number" id="anoFim" placeholder="Ano de fim (ex: 2024)" min="2019" max="2024">
            <input type="number" id="mesFim" placeholder="Mês de fim (ex: 12)" min="1" max="12">
        </div>
        <button onclick="gerarPDFs()">Gerar PDFs</button>

        <!-- Botões para abrir PDFs de meses específicos -->
        <h3>Selecione o mês:</h3>
        <div id="teclado">
            <!-- Cria um botão para cada mês -->
            <button onclick="abrirMes(1)">01</button>
            <button onclick="abrirMes(2)">02</button>
            <!-- ... e assim por diante até 12 -->
        </div>

        <!-- Controle de zoom para PDFs -->
        <h3>Controle de Zoom:</h3>
        <input type="range" id="zoomSlider" min="100" max="2000" value="400" step="50" />
        <label for="zoomSlider">Tamanho: <span id="zoomValue">400px</span></label>
    </header>

    <!-- Contêiner principal para exibição dos PDFs -->
    <main>
        <div class="pdf-container" id="pdfContainer"></div>
    </main>

    <!-- Script para funcionalidades -->
    <script>
        // Atualiza o valor do zoom quando o controle deslizante é ajustado
        const zoomSlider = document.getElementById('zoomSlider');
        const zoomValue = document.getElementById('zoomValue');

        zoomSlider.addEventListener('input', () => {
            zoomValue.textContent = `${zoomSlider.value}px`;
            ajustarTamanhoPDFs(zoomSlider.value);
        });

        // Ajusta o tamanho dos PDFs exibidos
        function ajustarTamanhoPDFs(tamanho) {
            const iframes = document.querySelectorAll('.pdf-item iframe');
            iframes.forEach(iframe => {
                iframe.style.width = `${tamanho}px`;
                iframe.style.height = `${tamanho}px`;
            });
        }

        let pdfCounter = 0; // Contador de PDFs gerados

        // Gera PDFs em um intervalo de datas
        function gerarPDFs() {
            const matricula = document.getElementById('matricula').value;
            const anoInicio = parseInt(document.getElementById('anoInicio').value);
            const mesInicio = parseInt(document.getElementById('mesInicio').value);
            const anoFim = parseInt(document.getElementById('anoFim').value);
            const mesFim = parseInt(document.getElementById('mesFim').value);

            if (!matricula || isNaN(anoInicio) || isNaN(mesInicio) || isNaN(anoFim) || isNaN(mesFim)) {
                alert("Preencha todos os campos corretamente.");
                return;
            }

            const pdfContainer = document.getElementById('pdfContainer');
            pdfContainer.innerHTML = ''; // Limpa PDFs antigos

            for (let ano = anoInicio; ano <= anoFim; ano++) {
                const mesInicioCorrigido = ano === anoInicio ? mesInicio : 1;
                const mesFimCorrigido = ano === anoFim ? mesFim : 12;

                for (let mes = mesInicioCorrigido; mes <= mesFimCorrigido; mes++) {
                    const link = `https://rhbahia.ba.gov.br/auditor/contracheque/file/pdf/${ano}/${mes}/1/${matricula}`;
                    criarIframe(link);
                }
            }
        }

        // Abre PDF de um mês específico
        function abrirMes(mes) {
            const matricula = document.getElementById('matricula').value;
            const ano = document.getElementById('anoInicio').value;

            if (!matricula || !ano) {
                alert("Preencha a matrícula e o ano de início.");
                return;
            }

            const link = `https://rhbahia.ba.gov.br/auditor/contracheque/file/pdf/${ano}/${mes}/1/${matricula}`;
            criarIframe(link);
        }

        // Cria um elemento iframe para exibir o PDF
        function criarIframe(link) {
            pdfCounter++;
            const pdfContainer = document.getElementById('pdfContainer');
            
            const pdfItem = document.createElement('div');
            pdfItem.className = 'pdf-item';
            
            const pdfInfo = document.createElement('div');
            pdfInfo.className = 'pdf-info';
            pdfInfo.innerText = `PDF ${pdfCounter}`;
            
            const iframe = document.createElement('iframe');
            iframe.src = link;
            iframe.title = "Visualizador de PDF";

            pdfItem.appendChild(pdfInfo);
            pdfItem.appendChild(iframe);
            pdfContainer.appendChild(pdfItem);
        }
    </script>
</body>
</html>
